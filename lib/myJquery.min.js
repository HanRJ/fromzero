/* myJquery 2014-08-26  by yansm*/
$(function(){function a(){return d.hasClass("type_top")?(g.css({left:"0px",top:"0px"}),c):d.hasClass("type_bottom")?(g.css({left:"0px",top:"0px"}),c):0}function b(){e=d.width(),f=d.height()}$(".needtooltip").tooltip();var c=300,d=$("body"),e=d.width(),f=d.height(),g=$(".indexMenu li"),h=$(".module_info li"),i=($(".area_right"),{normal:function(){var b=a();setTimeout(function(){d.removeClass().addClass("type_normal"),g.css({left:"0px",top:"0px",height:f/7+"px"})},b)},left:function(){var b=a();setTimeout(function(){d.removeClass().addClass("type_left"),g.css({left:"-"+(e-90)+"px",top:"0px",height:f/7+"px"})},b)},right:function(){var b=a();setTimeout(function(){d.removeClass().addClass("type_right"),g.css({left:"0px",top:"0px",height:f/7+"px"})},b)},top:function(){d.hasClass("type_bottom")?(d.addClass("type_top").addClass("type_top_end").removeClass("type_bottom").removeClass("type_bottom_end"),g.css({left:"0px",top:"43px"})):(d.removeClass().addClass("type_top_end"),g.css({left:"0px",top:"0px"}),setTimeout(function(){d.addClass("type_top"),g.css({left:"0px",top:"43px"})},c))},bottom:function(){d.hasClass("type_top")?(d.addClass("type_bottom").addClass("type_bottom_end").removeClass("type_top").removeClass("type_top_end"),g.css({left:"0px",top:"-43px"})):(d.removeClass().addClass("type_bottom_end"),g.css({left:"0px",top:"0px"}),setTimeout(function(){d.addClass("type_bottom"),g.css({left:"0px",top:"-43px"})},c))}});g.hover(function(){var a=$(this),b=a.index();h.removeClass("current"),h.eq(b).addClass("current")}).click(function(){var a=$(this),b=a.data("type"),c=a.data("target"),e=$(".area_"+b);c&&0==e.find(".box_"+c).length&&(e.append('<div class="scroll-pane box box_'+c+'"></div>'),e.find(".box_"+c).load(c+".html",function(){e.find(".box_"+c).jScrollPane(),$.initModule({target:c})})),c&&(e.find("> * ").css("display","none"),e.find(".box_"+c).css("display","block")),d.hasClass("type_"+b)||i[b]()}),b(),window.onresize=function(){b()},$.extend({getValues:function(){return{bodyWidth:e,bodyHeight:f,animateTime:c}}}),g.eq(0).click()}),$(function(){function a(){function a(){d.each(function(){var a=$(this),b=a.height();a.css("height",b+"px")})}$(".needtooltip").tooltip();var b=data_myInformation,c=$(".box_myInformation"),d=c.find(".panel"),e=c.find(".append_menu input"),f=c.find(".info_area"),g=f.length;f.each(function(d){var e=$(this),f=e.data("infovalue");e.html(b[f]),d==g-1&&(c.jScrollPane(),a())}),e.change(function(){var a=$(this),b=a.data("target"),c=a.is(":checked"),d=$("#"+b),e=d.data("distype");c?d.removeClass("distype_"+e+"_animate"):d.addClass("distype_"+e).addClass("distype_"+e+"_animate")}),d.each(function(){var a=$(this),b=a.find(".close"),d=a.attr("id");b.click(function(){c.find('.append_menu input[data-target="'+d+'"]').click()})})}function b(){function a(a){function b(a){var b=d.find("> li");b.removeClass("actived"),b.eq(a).addClass("actived"),t.scrollToElement(b.eq(a),!0,!0)}var c=$(".album_normal"),d=c.find(".photos_list"),e=j[a],f=e.photos,g=f.length,h=e.url,i=[],k=[],l=$(".album_list"),m=c.find(".left_area"),n=(l.width(),l.height());d.html("").removeAttr("style");for(var o=0;g>o;o++){var p=f[o],q=p.text,r=p.title,s=p.description;i.push('<li class="rel"><img src="'+h+q+'" ><aside class="abs tc">'+r+"</aside></li>"),k.push({imgUrl:h+q,description:s})}d.html(i.join("")),m.jScrollPane();var t=m.data("jsp");l.buildPhotos({imgMap:k,automatic:0,animateStyle:"move",hasToolbar:!1,hasDescription:!0,photoWidth:l.width(),photoHeight:l.height(),clickExEvent:function(a){b(a)}}),d.find("> li").click(function(){var a=$(this),c=a.index();b(c),l.toPage({num:c})}),l.find("img").draggable({stop:function(a,b){var c=b.helper,d=b.offset.top,e=(b.offset.left,c.width(),c.height());d>0?c.animate({top:"0px"},{queue:!1,duration:300}):n-e>d&&c.animate({top:n-e+"px"},{queue:!1,duration:300})}}),d.find(">li").get(0).click()}function b(a){function b(a){for(var b=[],c=0;a>c;c++)b.push(c);for(var c=0;a>c;c++){var d=parseInt(Math.random()*(a-c));b.push(b[d]),b.splice(d,1)}return b}var c=$(".album_wall_area"),d=c.find("li> div"),e=j[a],f=e.photos,g=f.length,h=e.url,i=c.width(),k=c.height()/3,l=[!0,!0,!0];d.empty();for(var m=b(g);l[0]||l[1]||l[2];){var n=[],o=0;n.push(d.eq(0).width()),n.push(d.eq(1).width()),n.push(d.eq(2).width());for(var p=0,q=n.length;q>p;p++)n[p]<n[o]&&(o=p);0==m.length&&(m=b(g));var r=d.eq(o),s=m[m.length-1],t=f[s],u=t.text,v=t.width,w=t.height,x=t.title;m.pop(),r.append('<div class="img_box rel" style="width: '+v/w*k+'px"><img src="'+h+u+'" /><aside class="abs tc">'+x+"</aside></div>"),l[o]=r.width()<i}}function c(a){var b=$(".album_mark");b.html('<div id="wrapper"><div id="carousel"></div></div><div id="donate-spacer"></div>');for(var c=$("#carousel"),d=j[a],e=d.photos,f=e.length,g=d.url,h=b.width(),i=b.height(),k=[],l=0;f>l;l++){{var m=e[l],n=m.text,o=m.title;m.description}k.push('<div><img src="'+g+n+'" alt="'+o+'" width="'+(h-400)+'" height="'+i+'" /></div>')}c.removeAttr("style").html(k.join("")).find(">div").css("margin-right",500-h+"px"),c.carouFredSel({width:h,height:i,align:!1,padding:[0,950,0,0],items:{width:100,height:i,visible:5,minimum:1},scroll:{items:1,duration:750,onBefore:function(a){a.items.old.add(a.items.visible).find("span").stop().slideUp()},onAfter:function(a){a.items.visible.last().find("span").stop().slideDown()}},auto:!1,onCreate:function(){$(this).children().each(function(){$(this).append("<span>"+$("img",this).attr("alt")+"</span>"),$(this).find("span").hide()})}}),c.children().click(function(){c.trigger("slideTo",[this,-4,"prev"])})}function d(a){for(var b=a,c=b.length,d=[],f=$(".photos_area"),g=0;c>g;g++){var h=b[g],i=h.title,j=h.url,k=(h.id,h.type);d.push('<div class="photo_area" data-index="'+g+'"><div class="photo_box3" data-type="'+k[1]+'"><div class="photo_content tc">'+n[k[1]]+"</div></div>"),d.push('<div class="photo_box2" data-type="'+k[0]+'"><div class="photo_content tc">'+n[k[0]]+'</div></div><div class="photo_box" data-type="normal"><div class="photo_content tc">'),d.push('<img src="'+j+'index.jpg" />'),d.push("<aside>"+i+"</aside>"),d.push("</div></div></div>")}f.append(d.join("")),f.find(".photo_area > div").click(function(){e($(this))})}function e(a){var b=a,c=b.parent().offset(),d=c.left,e=c.top,j=b.data("type"),l=b.parent().data("index");b.hasClass("current")||(b.addClass("current").css({width:g-80+"px",height:f-40+"px",top:60-e+"px",left:f-d-20+"px"}),k.find(".content_area").css("width",f-291+"px"),k.find(".album").removeClass("current"),k.find(".album_"+j).addClass("current"),i.addClass("box_myPhotos_actived"),o[j](l),setTimeout(function(){k.css("opacity","1")},2*h))}$(".needtooltip").tooltip();var f=$.getValues().bodyWidth,g=$.getValues().bodyHeight,h=$.getValues().animateTime,i=$(".box_myPhotos"),j=data_myPhotos,k=$(".album_box"),l=$(".photos_area"),m=$(".album_toolbar");$("#myPhoto_adjust").click(function(){i.toggleClass("neight_style")});var n={wall:'<img src="./images/wall.png"/><aside>照片墙</aside>',mac_wall:'<img src="./images/wall.png"/><aside>照片墙</aside>',mark:'<img src="./images/mark.png"/><aside>书签夹</aside>'};d(j);var o={normal:a,wall:b,mark:c};k.find("div.toolbar .close").click(function(){var a=l.find("div.current");k.removeAttr("style"),setTimeout(function(){a.removeClass("current").removeAttr("style"),i.removeClass("box_myPhotos_actived")},h)}),m.find(".glyphicon-zoom-in").click(function(){var a=$(".album_list"),b=a.data("index"),c=a.find('div.photo_item li[data-index="'+b+'"] img');c.height(1.1*c.height())}),m.find(".glyphicon-zoom-out").click(function(){var a=$(".album_list"),b=a.data("index"),c=a.find('div.photo_item li[data-index="'+b+'"]'),d=c.find("img"),e=d.height()/1.1;d.height(e<c.height()?"100%":e)})}var c={myInformation:a,myPhotos:b};$.extend({initModule:function(a){var b=a.target;c[b]()}})});